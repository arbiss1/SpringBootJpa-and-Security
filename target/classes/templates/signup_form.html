<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>Sign up</title>
    <script src="https://use.fontawesome.com/your-embed-code.js"></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css" />
    <script src="pwstrength.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
    <style>
    .buttonDiv {
    margin-top : 20px ;
    display : inline ;
    }
    .centerDiv {
  width: 30%;
  height: 50%;
  background: white;
  border : solid 2px lighblue ;
  border-radius : 8px ;
  padding :50px;
  margin-top : 5%;
  }
  body {
  height : auto;
  background-color:lightgray ;
  }
  .labelStyle {
  text-align : left ;
  width : 100%
  }
  .errorSpan {

  }
    </style>
</head>
<body>
    <div class="container text-center centerDiv">
        <div align = "center" style ="margin-top:20px" >
            <h1>Sign Up</h1>
        </div>
    <div align="center">
        <p>Already have an account ? <a href = "/login">Login</a></p>
        <div style = "display:inline-grid;">
        <span style = "color:red;" id = "nonUniqueUsername" th:if="${nonUniqueUsername}" th:text = "${nonUniqueUsername}"></span>
        <span id = "message"></span>
        <span id = "errorMessage"></span>
        </div>
    </div>
        <form th:action="@{/process_register}" th:object="${user}"
            method="post" style="max-width: 600px; margin: 0 auto;">
        <div align = "center" style = "margin-top:20px">
              <div align = "center"><input class="form-control" th:id ="userEmail" type="text" th:field="*{username}" id = "username"
                  placeholder = "Username..."/><div>
                    <br>
                <div align = "center">
                    <span id = "strength"></span>
                    <input class="form-control" type="password" onkeyup="return passwordChanged();"  th:field="*{password}"
                           id="password" name="password"  placeholder = "Password..."/>
                    </div>
                    <br>
                    <div align = "center" style = "display:inline;"><input class="form-control" type="password"
                    id = "passwordConfirm" th:field="*{MatchingPassword}"  placeholder = "Confirm Password..."/></div>

<!--                        <span th:if="${#fields.hasErrors('MatchingPassword')}" th:errors="*{MatchingPassword}"-->
<!--                              class="text-danger"></span>-->
                        <br>
               <div align = "center"><input class="form-control" id = "firstname"  type="text" th:field="*{first_name}"
                             minlength="2" maxlength="20" placeholder = "First Name..."/></div>
<!--                  <p th:each="error : ${#fields.hasErrors('first_name')}"-->
<!--                     th:text="${error}">Validation error</p>-->
                 <br>
               <div align = "center"><input class="form-control" type="text" id="lastname" th:field="*{lastName}"
                             minlength="2" maxlength="20" placeholder = "Last Name..."/></div>
<!--                  <p th:each="error : ${#fields.hasErrors('lastName')}"-->
<!--                     th:text="${error}">Validation error</p>-->
                   <br>
                   <div align = "center"><input class="form-control" type="text" th:field="*{user_address}" id="address"
                                                minlength="2" maxlength="20" placeholder = "Address..."/></div>
<!--                  <p th:each="error : ${#fields.hasErrors('user_address')}"-->
<!--                     th:text="${error}">Validation error</p>-->
                       <br>
                       <div align = "center"><input class="form-control" type="text" th:field="*{user_number}" id="phonenumber"
                       minlength="2" maxlength="20" placeholder = "Phone number..."/></div>
            <div align = "center" class = "buttonDiv">
                <button type="submit" style = "margin: 15px ;" class="btn btn-primary" th:id = "submit"
                        th:onclick = "errorCheck()">Sign Up</button>
            </div>
        </form>

    </div>
    <script>
    function gotoLogin(){
    	
    	location.href = "/login";
    }
    </script>
    <script type="text/javascript">
  $('form').validate();
</script>
    <script language="javascript">
   $(function () {
        $("#submit").click(function () {
            var password = $("#password").val();
            var confirmPassword = $("#passwordConfirm").val();
            var nonUniqueUsername = $("#nonUniqueUsername").val();
            var message =  $("#message");
            if (password != confirmPassword && nonUniqueUsername == null) {
                 message.html("Password don't match !").css('color','red');
                return false;
            }
            return true;
        });
    })
</script>
</body>
</html>